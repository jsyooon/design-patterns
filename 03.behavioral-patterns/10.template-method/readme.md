# 템플릿 메소드 패턴 (Template method Pattern)

클래스의 특정 기능을 확장하거나 변경하고자 할 때 상속을 사용하여 특정 메소드를 오버라이드 하는 방법   

클래스의 전체 알고리즘 중 일부 기능이 경우에 따라 다양한 방법으로 구현되는 경우, 경우의 수만큼 클래스를 복사해서 새로 만든다면 코드의 중복이 발생하고 유지보수가 매우 어려워진다. 템플릿 메소드 패턴은 이러한 상황에 유용한 패턴으로 클래스를 복사하는 대신 상속을 사용하여 서브 클래스에서 변경되는 메소드를 오버라이드 하는 방식이다. 부모 클래스는 전체 알고리즘을 구현하고, 서브 클래스들은 부모 클래스의 메소드 중 변경이 필요한 메소드를 오버라이드하여 각자에 맞는 기능을 구현한다. 부모 클래스는 전체 알고리즘에서 서브 클래스에서 구현한 메소드를 단지 호출만 할 뿐 구체적인 구현 내용은 알 필요가 없으므로 핵심 로직과 서브 로직이 구분될 수 있다. 


## 팩토리 메소드 패턴과 비교   
팩토리 메소드 패턴을 템플릿 메소드의 생성 패턴 버전으로 생각하면 좀 더 이해가 쉽다. 팩토리 메소드 패턴은 상위 클래스에서 인터페이스를 정의하고 하위 클래스에서 필요한 인스턴스를 생성한다. 상위 클래스에서 공통된 동작을 수행하며 부모 클래스는 서브 클래스에서 어떠한 인스턴스가 생성되었는지 알지 않아도 된다. 템플릿 메소드 방식도 마찬가지로 상위 클래스에서는 공통된 동작을 수행하고 각 서브 클래스에서 구체적인 로직을 구현해 부모 클래스는 각 서브 클래스에서 구현된 기능을 알 필요가 없다. 팩토리 메소드 패턴은 자식 클래스에서 다양한 인스턴스를 생성하는 방식이고, 템플릿 메소드 패턴은 자식 클래스에서 다양한 기능을 확장하는 방식이다.


## 예제   
더하기민 할 수 있는 `PlusCalculator` 클래스가 있다고 가정해보자. input으로부터 x, y 값을 가져와 검증한 뒤 결과를 화면에 뿌려준다.
```javascript
class PlusCalculator {
  getValue() {
    this.x = document.querySelector('input[name=x]').value;
    this.y = document.querySelector('input[name=y]').value;
  }

  validate() {
    if(isNaN(this.x) || isNaN(this.y)) {
      alert('올바른 값을 입력해주세요.');
      return false;
    }
    return true;
  }

  calculuate() {
    return this.x + this.y;
  }

  print() {
    document.write(`결과는 ${this.result} 입니다.`);
  }

  process() {
    this.getValue();
    this.validate();
    this.calculuate();
    this.print();
  }
}
```

여기서 곱셈만 하는 계산기를 별도로 추가해야 경우 아래와 같이 템플릿 메소드 패턴을 구현할 수 있다.    

1. `Calculator` 추상 클래스를 만들고 주요 로직을 구현한다. `calculate` 외의 메소드를 구현하면 된다.
2. `Calculator` 클래스를 상속한 `PlusCalculator` 클래스를 만들어 `calculate` 메소드를 오버라이드한다.
3. `Calculator` 클래스를 상속한 `MultiplyCalculator` 클래스를 만들고 `calculate` 메소드를 오버라이드 한다.   


## 템플릿 콜백 패턴 (Template callback Pattern)
템플릿 콜백 패턴은 구체적인 기능을 변경할 수 있도록 하는 점에서 템플릿 메소드 패턴과 목적이 같지만 구현 방법이 다르다.    
템플릿 메소드 패턴은 상속을 사용해 서브 클래스의 메소드를 호출하는 방식이지만 템플릿 콜백 패턴은 이름처럼 익명 함수 혹은 클래스를 콜백 함수로 전달해 호출하는 위임의 방식을 사용한다.

### 전략 패턴과 차이
클라이언트가 원하는 기능(전략)을 선택해서 클래스에 전달한다는 점에서 템플릿 콜백 패턴과 전략 패턴이 유사해 보인다.    
하지만 구현 방법을 보면 템플릿 콜팩 패턴은 파라미터로 콜백 함수를 전달하지만 전략 패턴은 전략 자체를 클래스로 해 여러 속성과 메소드를 가질 수 있다는 점이 다르다. 따라서 다양한 경우(전략)에 따라 여러 메소드나 속성이 변경될 때는 전략 패턴이, 하나의 기능만 변경할 필요가 있다면 템플릿 콜백 메서드 패턴이 유용하다.
