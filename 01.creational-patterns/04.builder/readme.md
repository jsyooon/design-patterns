# 빌더 패턴 (Builder Pattern)

옵션에 따라 다양한 형태의 인스턴스를 생성하는 방법

빌더 패턴은 옵션에 따라 인스턴스가 여러 형태를 갖는 경우 해당 옵션을 메소드로 분류해 적용하고 최종 `build` 단계에서 인스턴스를 생성하는 패턴이다.  
예를 들어 아래 `User` 클래스처럼 여러 개의 인자가 선택적으로 적용될 수 있는 클래스가 있다고 가정해보자. 간단하게 아래와 같이 인스턴스 생성 시 파라미터를 전달하는 형태로 만들 수 있다.

```javascript
class User {
  constructor(id, name, gender, birthday, location, job) {
    this.id = id;
    this.name = name;
    this.gender = gender;
    this.birthday = birthday;
    this.location = location;
    this.job = job;
  }
}

const user1 = new User('gildong', '홍길동', 'M', '2003.12.25', null, '학생');
const user2 = new User('yhchoi', '최영희', 'F', null, '서울', '주부');
```

위 방식을 사용하면 `User` 클래스 코드를 살펴보지 않는 한 각 인자들의 의미를 단번에 이해하기 어렵다. 또한 중간에 빈 값이 있는 경우에도 파라미터의 순서를 지키기 위해 `null`과 같은 무의미한 값을 반드시 전달해야 한다. 이는 가독성을 해칠 뿐 아니라 옵션이 변경될 경우 모든 인스턴스를 함께 수정해야 하는 등의 유지보수를 어렵게 만든다.

빌더 패턴을 사용하면 위 문제를 해결할 수 있다. 인스턴스를 생성하는 역할의 `Builder` 클래스를 통해 `User` 클래스의 인스턴스를 생성하고, 메서드 체이닝을 통해 필요한 옵션을 적용한다. 이 때 메서드 체이닝을 적용하기 위해 각 옵션을 적용하는 메서드는 `Builder` 클래스의 인스턴스를 반환한다. 모든 옵션이 적용되면 `Builder` 클래스의 `build` 메소드를 통해 최종 생성된 `User` 클래스의 인스턴스를 전달받는다. 최종 `build` 메소드가 호출될 때 `User` 클래스의 인스턴스가 생성되며, 이 인스턴스는 생성 이후에 내부 상태를 변경할 수 없는 불변 객체가 된다.
빌더 패턴을 사용하면 객체를 만드는 프로세스를 메소드를 이용해 독립적으로 분리할 수 있다. 또한 다양한 매개변수가 선택적으로 적용되어야 하는 경우 가독성 측면에서도 도움을 주며, 유지보수 시 옵션이 변경될 때에도 간단히 메소드를 추가/삭제함으로써 유연하게 변경이 가능하다.

## 예제

위에서 본 `User` 클래스를 빌더 패턴으로 적용해본다.

1. `User` 클래스의 인스턴스를 생성하는 `UserBuilder` 클래스를 생성한다.
2. `UserBuilder` 클래스는 `User` 클래스의 매개변수 개수만큼 각 매개변수를 설정하는 메소드를 가지고 있다. 메소드들은 매개변수를 `UserBuilder` 클래스의 프로퍼티로 적용하는 동시에 `UserBuilder` 인스턴스인 자신(`this`)를 반환한다.
3. 모든 매개변수 설정이 끝나면 `UserBuilder`클래스의 `build` 메소드를 호출한다. 해당 메소드는 `User`클래스의 인스턴스를 생성하고 이를 반환한다. 또한 다른 `User` 인스턴스 생성을 위해 모든 `User` 매개변수를 초기화한다.
